# AI 图像编辑

AI 图像编辑是一款强大的工作流工具，利用人工智能根据您的文本指令编辑和变换图像。无论您想要改变物体、修改场景还是应用创意变换，这个工具都能让复杂的图像编辑变得人人可及。

## 功能特性

### 🖼️ 智能图像处理
- **主图像处理**：上传您需要编辑的主图像
- **参考图像支持**：添加参考图像来指导 AI 变换
- **多图像输入**：同时处理多个图像进行批量操作
- **智能文本翻译**：自动将中文描述翻译为英文，以获得更好的 AI 理解效果

### 🤖 多种 AI 模型
根据您的需求选择不同的 AI 模型：

- **nano-banana/edit**：适用于一般图像编辑任务的快速高效模型
- **flux-pro/kontext**：适用于复杂变换和高质量结果的高级模型

### 💾 灵活的输出选项
- **自定义保存位置**：选择编辑后图像的保存位置
- **自动存储**：图像自动保存到工作空间存储中
- **格式支持**：支持 JPG、PNG、WebP 和 JPEG 格式

## 工作原理

### AI 图像编辑模块

核心功能由**编辑模块**提供，通过以下步骤处理您的图像：

1. **图像输入**：上传一个或多个图像（需要主图像，其他图像可选）
2. **描述**：提供文本描述，说明您希望如何修改图像
3. **模型选择**：为您的任务选择合适的 AI 模型
4. **处理**：AI 分析您的图像和文本以创建所需的变换
5. **输出**：获得编辑后的图像及其预览

### 输入参数

| 参数 | 类型 | 必需 | 描述 |
|------|------|------|------|
| **主图像** | 文件 | 是 | 您想要编辑的主图像（JPG、PNG、WebP、JPEG） |
| **子图像** | 文件 | 否 | 用于指导变换的参考图像 |
| **其他图像** | 文件数组 | 否 | 额外的参考图像 |
| **提示词** | 文本 | 是 | 所需图像变换的描述 |
| **模型** | 选择 | 是 | 在 `nano-banana/edit` 或 `flux-pro/kontext` 之间选择 |
| **输出文件** | 保存路径 | 否 | 保存结果的自定义位置（可选） |

### 输出

工作流返回一个处理后的图像文件路径数组，您可以在后续步骤中使用或下载。

## 使用示例

### 基本图像变换
```
主图像：person-photo.jpg
提示词："将人物的衬衫改为红色"
模型：nano-banana/edit
```

### 带参考的风格转换
```
主图像：landscape.jpg
子图像：artistic-style-reference.jpg
提示词："将参考图像的艺术风格应用到风景图上"
模型：flux-pro/kontext
```

### 物体替换
```
主图像：room-interior.jpg
提示词："将沙发替换为现代皮质沙发"
模型：nano-banana/edit
```

## 工作流集成

### AI 图像编辑子流程

项目包含一个预构建的子流程，它结合了：

1. **文本翻译**：使用 LLM 自动将中文提示词翻译为英文
2. **图像处理**：使用优化设置应用编辑模块
3. **结果预览**：显示处理后的图像以便立即查看

### 子流程输入参数：
- **主图像**：主图像文件
- **子图像**：可选的参考图像
- **其他图像**：可选的额外图像
- **描述**：文本描述（支持中文并自动翻译）
- **模型**：AI 模型选择
- **输出文件**：可选的自定义保存位置

## 快速开始

### 前置要求
- 安装 Node.js 和 npm
- 使用 Poetry 进行依赖管理的 Python
- OOMOL 平台环境

### 安装
```bash
# 安装 Node.js 依赖
npm install

# 安装 Python 依赖
poetry install --no-root
```

### 基本使用

1. **上传您的图像**：选择您想要编辑的主图像
2. **描述变更**：清晰地写出您想要修改的内容
3. **选择模型**：选择最适合您需求的 AI 模型
4. **运行工作流**：执行处理并等待结果
5. **下载结果**：将编辑后的图像保存到您想要的位置

## 模型推荐

### 何时使用 nano-banana/edit：
- 快速编辑和修改
- 简单的物体替换
- 颜色调整
- 基本变换
- 需要更快的处理时间

### 何时使用 flux-pro/kontext：
- 复杂的场景修改
- 高质量的艺术变换
- 详细的风格转换
- 专业级别的结果
- 当处理时间不那么关键时

## 获得最佳结果的技巧

### 编写有效的提示词：
- 对想要改变的内容要具体明确
- 提及颜色、风格或特定物体
- 使用描述性语言
- 包含关于预期结果的上下文

### 图像准备：
- 使用高质量的源图像
- 确保良好的光线和清晰度
- 考虑您请求更改的复杂性
- 在有用时提供参考图像

### 模型选择：
- 对于简单任务从 nano-banana/edit 开始
- 对于复杂或艺术性变换使用 flux-pro/kontext
- 测试两种模型以查看哪种更适合您的特定用例

## 技术细节

- **支持格式**：JPG、PNG、WebP、JPEG
- **处理**：带状态轮询的异步处理
- **存储**：使用 OOMOL 存储系统（`/oomol-driver/oomol-storage/`）
- **预览**：处理后自动图像预览
- **错误处理**：全面的错误处理和验证

## 故障排除

### 常见问题：
- **文件未找到**：确保图像文件存在于指定路径
- **模型错误**：检查所选模型是否可用
- **超时问题**：尝试减小图像大小或复杂度
- **格式错误**：验证图像格式是否受支持

### 获取帮助：
- 检查工作流日志以获取详细的错误消息
- 确保所有输入参数都正确配置
- 验证网络连接以访问 AI 模型
- 检查提示词的清晰度和具体性

## 许可证

此项目在存储库许可证下可用。有关更多详细信息，请参阅 [GitHub 存储库](https://github.com/oomol-flows/ai-image-edit.git)。

## 贡献

欢迎贡献！请访问 [GitHub 存储库](https://github.com/oomol-flows/ai-image-edit.git) 提交问题或拉取请求。