title: "AI Image Edit"
nodes:
  - node_id: fal-image-process#1
    task: self::edit_block
    inputs_from:
      - handle: other_images
        value:
          - /oomol-driver/oomol-storage
        from_flow:
          - input_handle: other_images
        from_node:
          []
      - handle: prompt
        value: Eagle to pigeon
        from_node:
          - node_id: llm#1
            output_handle: english_output
      - handle: output_file
        value:
        from_flow:
          - input_handle: output_file
        from_node:
          []
      - handle: model
        value: nano-banana/edit
        from_flow:
          - input_handle: model
      - handle: sub_image
        value:
        from_flow:
          - input_handle: sub_image
      - handle: main_image
        from_flow:
          - input_handle: main_image
  - node_id: llm#1
    title: "LLM #1"
    inputs_from:
      - handle: messages
        value: null
      - handle: timeout
        value: 30
      - handle: retry_times
        value: 0
      - handle: retry_sleep
        value: 3.5
      - handle: model
        value:
          model: deepseek-chat
          temperature: 0.5
          top_p: 1
          max_tokens: 8192
      - handle: template
        value:
          - role: user
            content: "将  {{input}}，翻译成英文。"
        schema_overrides:
          - schema:
              type: array
      - handle: skills
        value:
          []
      - handle: stream
        value: true
      - handle: input
        value: 鸽子换成老鹰
        from_flow:
          - input_handle: description
    task: llm::llm
    inputs_def:
      - handle: input
        json_schema:
          type: string
          ui:widget: text
        value: hello!
    outputs_def:
      - handle: english_output
        description: write your answer here
        json_schema:
          type: string
inputs_def:
  - handle: main_image
    json_schema:
      type: string
      ui:widget: file
      ui:options:
        excludeAll: true
        filters:
          - name: Image
            extensions:
              - jpg
              - png
              - webp
              - jpeg
    nullable: false
    executor_name: python
  - handle: sub_image
    json_schema:
      type: string
      ui:widget: file
    nullable: true
    value:
    executor_name: python
  - handle: other_images
    json_schema:
      type: array
    nullable: true
    description: 要上传的图像文件
    value:
    executor_name: python
  - handle: description
    json_schema:
      type: string
      ui:widget: text
    nullable: false
    executor_name: python
  - handle: model
    json_schema:
      enum:
        - nano-banana/edit
        - flux-pro/kontext
      ui:options:
        labels:
          - nano-banana/edit
          - flux-pro/kontext
    value: nano-banana/edit
    nullable: false
    executor_name: python
  - handle: output_file
    json_schema:
      type: string
      ui:widget: save
    value:
    nullable: true
    executor_name: python
outputs_def:
  - handle: image
    json_schema:
      type: array
      items:
        type: string
    nullable: false
    description: 处理后的图像文件列表
    executor_name: python
outputs_from:
  - handle: image
    from_node:
      - node_id: fal-image-process#1
        output_handle: image
description: Enter a paragraph of text and an image, and the AI ​​will edit the
  image based on the text and output the image address.
