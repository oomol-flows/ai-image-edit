title: "%ai-image-edit2%"
nodes:
  - node_id: fal-image-process#1
    task: self::edit_block
    inputs_from:
      - handle: prompt
        value: Eagle to pigeon
        from_node:
          - node_id: llm-chat#1
            output_handle: output
      - handle: output_file
        value:
        from_flow:
          - input_handle: output_file
        from_node:
          []
      - handle: model
        value: nano-banana/edit
        from_flow:
          - input_handle: model
      - handle: reference_image
        value:
        from_flow:
          - input_handle: reference_image
      - handle: main_image
        from_flow:
          - input_handle: main_image
  - node_id: llm-chat#1
    title: "%12%"
    inputs_from:
      - handle: messages
        value: null
      - handle: timeout
        value: 30
      - handle: retry_times
        value: 0
      - handle: model
        value:
          model: openai/gpt-4.1
          temperature: 0.6
          top_p: 0.8
          max_tokens: 8100
      - handle: template
        value:
          - role: user
            content: "Translate the input language of {{input}} into English output"
        schema_overrides:
          - schema:
              type: array
      - handle: retry_sleep
        value: 3.5
      - handle: skills
        value:
          []
      - handle: stream
        value: true
      - handle: input
        value: hello!
        from_flow:
          - input_handle: description
    task: llm::llm-chat
    inputs_def:
      - handle: input
        description: User input text to be appended to the conversation
        json_schema:
          type: string
          ui:widget: text
        value: hello!
inputs_def:
  - handle: main_image
    json_schema:
      type: string
      ui:widget: file
      ui:options:
        excludeAll: true
        filters:
          - name: Image
            extensions:
              - jpg
              - png
              - webp
              - jpeg
    nullable: false
    executor_name: python
  - handle: reference_image
    json_schema:
      type: string
      ui:widget: file
    value:
    nullable: true
    executor_name: python
  - handle: description
    json_schema:
      type: string
      ui:widget: text
    nullable: false
    executor_name: python
  - handle: model
    json_schema:
      enum:
        - nano-banana/edit
        - flux-pro/kontext
      ui:options:
        labels:
          - nano-banana/edit
          - flux-pro/kontext
    value: nano-banana/edit
    nullable: false
    executor_name: python
  - handle: output_file
    json_schema:
      type: string
      ui:widget: save
    value:
    nullable: true
    executor_name: python
outputs_def:
  - handle: image
    description: "%key4%"
    json_schema:
      type: string
      ui:widget: file
    nullable: false
    executor_name: python
outputs_from:
  - handle: image
    from_node:
      - node_id: fal-image-process#1
        output_handle: image
description: "%enter-a-paragraph-of-text-and-an-image-and-the-ai-will-edit-the%"
